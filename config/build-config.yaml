# 构建流水线配置文件

pipeline:
  name: Build Pipeline
  description: 项目构建、测试和打包流水线
  
  # 输入参数定义
  inputs:
    project-name:
      default: ${{ github.repository }}
      description: 项目名称
      required: true
    build-type:
      default: release
      description: 构建类型（debug/release）
      required: false
    build-version:
      default: ${{ github.ref_name }}
      description: 构建版本号
      required: false
    run-tests:
      default: "true"
      description: 是否运行测试
      required: false
    run-lint:
      default: "true"
      description: 是否运行代码检查
      required: false
    upload-artifacts:
      default: "false"
      description: 是否上传构建产物
      required: false
  
  # 环境变量
  env:
    PYTHONUNBUFFERED: "1"
    BUILD_TYPE: release
    CI: "true"
  
  # 自定义步骤（在运行脚本之前执行）
  steps:
    - name: Check Python version
      run: python --version
    
    - name: Check Git version
      run: git --version
  
  # 触发条件
  triggers:
    push:
      branches:
        - main
        - develop
        - "release/**"
    pull_request:
      branches:
        - main
        - develop
    workflow_dispatch:
      inputs:
        build-type:
          description: '构建类型'
          required: false
          default: 'release'
        run-tests:
          description: '运行测试'
          required: false
          default: 'true'
  
  # 依赖的其他流水线（可选）
  # dependencies: []

